<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

<script>

    function execCode(counter) {
        return new Promise((resolve, reject) => {
            // 异步任务
            setTimeout(() => {
                if (counter > 0) { // counter可以计算的情况
                    let total = 0
                    for (let i = 0; i < counter; i++) {
                        total += i
                    }
                    // 成功的回调
                    resolve(total)
                } else { // 失败情况, counter有问题
                    // 失败的回调
                    reject(`${counter}有问题`)
                }
            }, 3000)
        })
    }

    // 执行一次
    execCode(255).then(value => {
        console.log("成功:", value)
    }).catch(err => {
        console.log("失败:", err)
    })

</script>

</body>
</html>
